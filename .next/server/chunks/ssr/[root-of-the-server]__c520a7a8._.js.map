{"version":3,"sources":["turbopack:///[project]/lib/prisma.ts","turbopack:///[project]/app/dashboard/admin/approvals/page.tsx"],"sourcesContent":["import type { PrismaClient as PrismaClientType } from '@prisma/client'\n\ntype PrismaClientConstructor = new () => PrismaClientType\n\nfunction createStubClientConstructor(): PrismaClientConstructor {\n  const createModelProxy = (model: string) =>\n    new Proxy(\n      {},\n      {\n        get(_target, property: string | symbol) {\n          if (typeof property === 'string') {\n            if (property === 'findMany') return async () => []\n            if (property === 'findUnique') return async () => null\n            if (property === 'deleteMany') return async () => ({ count: 0 })\n            return async () => {\n              throw new Error(`Prisma Client is not available in this environment. Attempted to call ${model}.${property}.`)\n            }\n          }\n          return undefined\n        }\n      }\n    )\n\n  const clientProxy = new Proxy(\n    {},\n    {\n      get(_target, property: string | symbol) {\n        if (typeof property === 'string') {\n          if (property === '$connect' || property === '$disconnect') {\n            return async () => undefined\n          }\n          if (property.startsWith('$')) {\n            return async () => {\n              throw new Error(`Prisma Client is not available in this environment. Attempted to call ${property}.`)\n            }\n          }\n          return createModelProxy(property)\n        }\n        return undefined\n      }\n    }\n  )\n\n  class PrismaClientStub {\n    constructor() {\n      return clientProxy as unknown as PrismaClientType\n    }\n  }\n\n  return PrismaClientStub as unknown as PrismaClientConstructor\n}\n\nlet PrismaClientCtor: PrismaClientConstructor\n\ntry {\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  PrismaClientCtor = require('@prisma/client').PrismaClient as PrismaClientConstructor\n} catch (error) {\n  console.warn('Falling back to PrismaClient stub. Original error:', error)\n  PrismaClientCtor = createStubClientConstructor()\n}\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var prisma: PrismaClientType | undefined\n}\n\nexport const prisma: PrismaClientType = globalThis.prisma ?? new PrismaClientCtor()\n\nif (process.env.NODE_ENV !== 'production') globalThis.prisma = prisma\n\nexport default prisma\n","import React from 'react'\nimport prisma from '@/lib/prisma'\nimport { approveUserAction } from '../actions'\n\ntype PendingUser = Awaited<ReturnType<typeof prisma.user.findMany>>[number]\n\nexport default async function ApprovalsPage() {\n  const pending = await prisma.user.findMany({ where: { isApproved: false }, take: 50 })\n  return (\n    <main className=\"p-6 space-y-4\">\n      <h1 className=\"text-2xl font-bold\">User Approvals</h1>\n      <p className=\"mt-2\">Approve newly registered users. You can also contact users at the email listed below.</p>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {pending.map((u: PendingUser) => (\n          <div key={u.id} className=\"p-4 bg-white rounded shadow\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"font-medium\">{u.name || 'â€”'}</div>\n                <div className=\"text-sm text-slate-600\">{u.email}</div>\n                <div className=\"text-xs text-slate-400\">Registered: {u.createdAt?.toISOString?.()}</div>\n              </div>\n              <form action={approveUserAction}>\n                <input type=\"hidden\" name=\"userId\" value={u.id} />\n                <button type=\"submit\" className=\"px-3 py-1 bg-green-600 text-white rounded\">Approve</button>\n              </form>\n            </div>\n          </div>\n        ))}\n      </div>\n      <div className=\"mt-4 text-sm text-slate-600\">Need to contact users? Email them from your admin mail client or click to copy their address.</div>\n    </main>\n  )\n}\n"],"names":[],"mappings":"uZAoDI,EAEJ,GAAI,CAEF,EAAmB,EAAA,CAAA,CAAA,OAA0B,YAAY,AAC3D,CAAE,MAAO,EAAO,OACd,QAAQ,IAAI,CAAC,qDAAsD,GAnC7D,EAAc,IAAI,MACtB,CAAC,EACD,CACE,IAAI,CAAO,CAAE,CAAyB,EACpC,GAAwB,UAApB,AAA8B,OAAvB,QACT,AAAiB,aAAb,GAAwC,eAAe,CAA5B,EACtB,cAAY,EAEjB,EAAS,UAAU,CAAC,KACf,CADqB,SAE1B,MAAM,AAAI,MAAM,CAAC,sEAAsE,EAAE,EAAS,CAAC,CAAC,CACtG,EA5BR,IAAI,MACF,CAAC,EACD,CACE,IAAI,CAAO,CAAE,CAAyB,EACpC,GAAwB,UAApB,AAA8B,OAAvB,QACT,AAAiB,YAAY,CAAzB,EAAgC,SAAY,EAAE,CACjC,cAAc,CAA3B,EAAkC,SAAY,KACjC,cAAc,CAA3B,EAAkC,UAAa,AAAD,CAAG,MAAO,EAAE,CAAC,CACxD,UACL,MAAM,AAAI,MAAM,CAAC,sEAAsE,EAAE,AAqBrE,EArB2E,CAAC,EAAE,EAAS,CAAC,CAAC,CAC/G,CAGJ,CACF,EAmBA,CACF,GAmBF,EAhBA,MAAM,AACJ,WAeiB,EAfH,CACZ,OAAO,CACT,CACF,CAaF,CAOO,IAAM,EAA2B,WAAW,MAAM,EAAI,IAAI,mBAIlD,0DCtEf,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAIe,eAAe,IAC5B,IAAM,EAAU,MAAM,EAAA,OAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAE,MAAO,CAAE,YAAY,CAAM,EAAG,KAAM,EAAG,GACpF,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,0BACd,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,mBACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gBAAO,0FACpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACZ,EAAQ,GAAG,CAAC,AAAC,GACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAe,UAAU,uCACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAE,IAAI,EAAI,MACxC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCAA0B,EAAE,KAAK,GAChD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCAAyB,eAAa,EAAE,SAAS,EAAE,sBAEpE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,OAAQ,EAAA,iBAAiB,WAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,KAAK,SAAS,MAAO,EAAE,EAAE,GAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,qDAA4C,mBATxE,EAAE,EAAE,KAelB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCAA8B,oGAGnD"}